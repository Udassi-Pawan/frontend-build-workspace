(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{13066:function(e,t,n){Promise.resolve().then(n.bind(n,36135))},25431:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437);function s(e){let{name:t,classes:n}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center  ".concat((e=>{let t=["bg-blue-500","bg-green-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-purple-500","bg-teal-500","bg-cyan-500","bg-orange-500"],n=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0),r=n%t.length;return t[r]})(t)," text-white rounded-full border-box ").concat(n),children:(0,r.jsx)("p",{children:t.split(" ")[0][0]+t.split(" ")[1][0]})})}n(2265)},26261:function(e,t,n){"use strict";n.r(t),n.d(t,{SocketContext:function(){return o},SocketProvider:function(){return c}});var r=n(57437),s=n(82749),l=n(2265),a=n(63388);let o=(0,l.createContext)(null),i=[{url:"stun:global.stun.twilio.com:3478"},{url:"turn:global.turn.twilio.com:3478?transport=udp",username:"a939e485500fe0ea3ed2f216929f5a3f9bcb71b7ae47c0d70d3178eb61a47aaf",credential:"ZQStZHd9+N0rq5pjVxRmO0UaycAbbA/m+/XerXQ3RRY="},{url:"turn:global.turn.twilio.com:3478?transport=tcp",username:"a939e485500fe0ea3ed2f216929f5a3f9bcb71b7ae47c0d70d3178eb61a47aaf",credential:"ZQStZHd9+N0rq5pjVxRmO0UaycAbbA/m+/XerXQ3RRY="},{url:"turn:global.turn.twilio.com:443?transport=tcp",username:"a939e485500fe0ea3ed2f216929f5a3f9bcb71b7ae47c0d70d3178eb61a47aaf",credential:"ZQStZHd9+N0rq5pjVxRmO0UaycAbbA/m+/XerXQ3RRY="}];function c(e){let{children:t}=e,[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),{data:h}=(0,s.useSession)();return(0,l.useEffect)(()=>{if(h){let e=(0,a.io)("".concat("https://workspace-api-f8rx.onrender.com"),{transportOptions:{polling:{extraHeaders:{Authorization:"Bearer ".concat(null==h?void 0:h.authToken)}}}});new Promise(t=>{e.on("connect",()=>{t(e),n.e(42).then(n.bind(n,67900)).then(t=>{let{default:n}=t,r=new n(e.id,{config:{iceServers:i}});d(e),m(r)})})})}},[null==h?void 0:h.authToken]),(0,r.jsx)(o.Provider,{value:{socket:c,peer:u},children:t})}},11287:function(e,t,n){"use strict";n.r(t),n.d(t,{SpinnerContext:function(){return a},default:function(){return o}});var r=n(57437),s=n(2265);function l(e){let{}=e;return(0,r.jsx)("div",{className:"z-50",children:(0,r.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-gray-200 border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,r.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})})}let a=(0,s.createContext)(null);function o(e){let{children:t}=e,[n,o]=(0,s.useState)(!1);return(0,r.jsx)(a.Provider,{value:{setLoading:o},children:(0,r.jsxs)("div",{className:"relative",children:[n&&(0,r.jsx)("div",{className:"absolute fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-40",children:(0,r.jsx)(l,{})}),(0,r.jsx)("div",{className:"",children:t})]})})}},36135:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(57437),s=n(29222),l=n(26261),a=n(2265),o=n(25431),i=n(10418),c=n(82749),d=n(16691),u=n.n(d),m=n(78467),h=n(6435),x=n(11287);function p(e){let{messages:t,groupId:n}=e,[d,p]=(0,a.useState)(""),f=(0,a.useRef)(null),[g,v]=(0,a.useState)(!1),{theme:b}=(0,h.F)(),A=(0,a.useRef)(null),{socket:j}=(0,a.useContext)(l.SocketContext),{setLoading:N}=(0,a.useContext)(x.SpinnerContext),[y,w]=(0,a.useState)(null),[R,V]=(0,a.useState)();(0,a.useEffect)(()=>{w(t)},[t]),(0,a.useEffect)(()=>{if(n)return null==j||j.on("message ".concat(n),e=>(w(t=>[...t,e]),e)),()=>{null==j||j.off("message ".concat(n))}},[j,n]);let k=async function(){let e=f.current.files[0],{data:t}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/s3/upload"),{filetype:e.type}),{uploadUrl:n,videoId:r}=t;return await s.Z.put(n,e),r},{data:C}=(0,c.useSession)(),B=async function(){(0!=f.current.files.length||""!=d)&&N(!0);let e="";0!=f.current.files.length&&(e=await k()),null==j||j.emit("createChat",{text:R,groupId:n,image:d,video:e},e=>{}),p(""),v(""),f.current.value=[],V(""),N()},S=async function(e){let t=document.getElementById(e);if(!t.paused||t.readyState>=1)return;let{data:n}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/files/download"),{filename:e,originalFilename:e},{headers:{Authorization:"Bearer ".concat(null==C?void 0:C.authToken)}});t.src=n,t.load(),t.play()};return(0,a.useEffect)(()=>{!function(){let e=document.getElementById("messages");e&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}()},[]),(0,r.jsxs)("div",{className:"flex-1 p:2 sm:p-6 justify-between flex flex-col h-[75vh]  md:h-[85vh] justify-end",children:[(0,r.jsx)(i.Z,{forceScroll:!0,className:"space-y-4 p-1",children:null==y?void 0:y.map(e=>{var t;return(0,r.jsx)("div",{children:(e.image||e.text||e.video)&&e.senderName==(null==C?void 0:null===(t=C.user)||void 0===t?void 0:t.name)?(0,r.jsx)("div",{className:"chat-message",children:(0,r.jsxs)("div",{className:"flex items-end justify-end",children:[(0,r.jsx)("div",{className:"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-1 items-end",children:(0,r.jsxs)("div",{className:"flex flex-col justify-end items-end",children:[e.image&&(0,r.jsx)("img",{className:"rounded-2xl",alt:"",height:23,src:e.image}),e.video&&(0,r.jsx)("video",{className:"rounded-2xl",width:"320",height:"240",id:e.video,controls:!0,autoPlay:!0,onClick:()=>S(e.video),onTouchStart:()=>S(e.video),poster:"data:image/jpeg;base64,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"}),e.text&&(0,r.jsx)("span",{className:"px-4 py-2 rounded-lg inline-block rounded-br-none bg-blue-600 text-white ",children:e.text}),(0,r.jsx)("p",{className:"justify-self-end flex-wrap",children:e.senderName})]})}),(0,r.jsx)(o.Z,{classes:"h-6 w-6 order-2",name:e.senderName})]})}):(0,r.jsx)("div",{className:"chat-message",children:(0,r.jsxs)("div",{className:"flex items-end",children:[(0,r.jsx)("div",{className:"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start",children:(0,r.jsxs)("div",{children:[e.image&&(0,r.jsx)("img",{className:"rounded-2xl",alt:"",height:23,src:e.image}),e.video&&(0,r.jsx)("video",{className:"rounded-2xl",width:"320",height:"240",id:e.video,controls:!0,autoPlay:!0,poster:"data:image/jpeg;base64,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",onClick:()=>S(e.video)}),e.text&&(0,r.jsx)("span",{className:"px-4 py-2 rounded-lg inline-block rounded-bl-none bg-gray-300 text-gray-600",children:e.text}),(0,r.jsx)("p",{children:e.senderName})]})}),(0,r.jsx)(o.Z,{classes:"h-6 w-6 order-1",name:e.senderName})]})})},e.timestamp)})}),(0,r.jsx)("div",{className:" border-t-2 border-gray-".concat("light"==b?"200":"500"," px-4 pt-4 mb-2 justify-self-end "),children:(0,r.jsxs)("div",{className:"flex align-center",children:[(0,r.jsx)(m.I,{onKeyDown:e=>{"Enter"===e.key&&B()},style:{width:"80%"},value:R,onChange:e=>V(e.target.value),placeholder:"text",type:"text",className:"focus:outline-none focus:placeholder-gray-400 text-gray-".concat("light"==b?"200":"600"," placeholder-gray-600 pl-2 bg-gray-300 rounded-md py-3")}),(0,r.jsxs)("div",{className:"flex align-center  items-center sm:flex",children:[(0,r.jsx)("button",{onClick:()=>{A.current.click()},type:"button",className:"inline-flex  items-center bg-gray-300 justify-center py-5 h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-200 focus:outline-none",children:(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(u(),{alt:"",width:22,height:22,src:"/gallery.png"}),d&&(0,r.jsx)("span",{style:{position:"absolute",top:"-10px",right:"-10px",backgroundColor:"red",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"1"})]})}),(0,r.jsx)("input",{type:"file",ref:A,accept:"image/*",onChange:e=>{var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{p(t.result)}},style:{display:"none"}}),(0,r.jsx)("button",{onClick:()=>{f.current.click()},type:"button",className:"inline-flex  rounded-r-xl items-center bg-gray-300 justify-center h-10 w-10 transition duration-500 ease-in-out text-gray-500 hover:bg-gray-200 focus:outline-none",children:(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(u(),{alt:"",width:22,height:22,src:"/video.png"}),g&&(0,r.jsx)("span",{style:{position:"absolute",top:"-10px",right:"-10px",backgroundColor:"red",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"1"})]})}),(0,r.jsx)("input",{type:"file",accept:"video/*",onChange:e=>v(e.target.files[0]),ref:f,style:{display:"none"}}),(0,r.jsxs)("button",{onClick:B,type:"button",className:"inline-flex items-center justify-center rounded-lg px-4 py-3 transition duration-500 ease-in-out text-white bg-blue-500 hover:bg-blue-400 focus:outline-none",children:[(0,r.jsx)("span",{className:"font-bold",children:"Send"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 ml-2 transform rotate-90",children:(0,r.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})]})]})]})})]})}var f=n(3666);n(15136);var g=n(63014),v=n(30847),b=n(83294);v.Z.addLocale(b.Z);let A=new v.Z("en-US");function j(e){let{groupId:t,files:n,getData:l}=e,{data:o}=(0,c.useSession)(),i=(0,a.useRef)(null),{setLoading:d}=(0,a.useContext)(x.SpinnerContext),u=async function(){d(!0);let e=i.current.files[0],{data:n}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/files/create"),{filetype:e.type,groups:[t],name:e.name.split(".")[0]},{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.authToken)}});console.log(n);let{uploadUrl:r}=n;await s.Z.put(r,e),l(),d(),g.Am.success("File Uploaded")};async function h(e,t){let{data:n}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/files/download"),{filename:e,originalFilename:t},{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.authToken)}}),r=document.createElement("a");r.style.display="none",r.href=n,r.download=encodeURIComponent(t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-10 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8 mt-20",children:[null==n?void 0:n.map(e=>(0,r.jsx)("div",{className:"items-center flex sm:flex-col border border-solid border-2 border-gray-400 rounded-xl p-2",children:(0,r.jsxs)("div",{className:"flex flex-col items-center sm:items-start",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 justify-start",children:[(0,r.jsx)("h2",{className:"mt-2 sm:mt-0 text-wrap scroll-m-20 border-b-2 pb-2 text-xl font-semibold tracking-tight transition-colors first:mt-0",children:e.name+"."+e.extension}),(0,r.jsxs)("button",{onClick:()=>h(e._id+"."+e.extension,e.name+"."+e.extension),className:"Btn",children:[(0,r.jsx)("svg",{className:"svgIcon",viewBox:"0 0 384 512",height:"0.6em",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})}),(0,r.jsx)("span",{className:"icon2"}),(0,r.jsx)("span",{className:"tooltip",children:"Download"})]})]}),(0,r.jsxs)("p",{className:"text-primary-400",children:[" Added by: ",e.owner.name]}),(0,r.jsxs)("p",{className:"text-primary-400",children:[" ","Uploaded on: ",A.format(e.timestamp)," "]})]})},e._id))," ",n&&0==n.length&&(0,r.jsx)("p",{className:"mt-20 text-center text-2xl",children:"No Files Uploaded Yet"})]}),(0,r.jsxs)("div",{className:"mx-auto mt-8 flex items-center justify-center gap-5",children:[(0,r.jsx)(m.I,{ref:i,type:"file"}),(0,r.jsx)(f.z,{onClick:u,children:"Upload"})]})," "]})}var N=n(24033);function y(e){let{members:t,usersOnline:n,groupId:l}=e,d=(0,N.useRouter)(),{data:u}=(0,c.useSession)(),{setLoading:m}=(0,a.useContext)(x.SpinnerContext),h=async function(){m(!0);let{data:e}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/users/leave"),{groupId:l},{headers:{Authorization:"Bearer ".concat(null==u?void 0:u.authToken)}});m(!1),g.Am.success("Group left"),d.push("/")};return(0,r.jsxs)("div",{className:"border-l border-gray-300 hidden md:block pl-2 mx-1 flex flex-col items-center",children:[(0,r.jsx)("h1",{className:"ml-7 mt-10 text-2xl",children:"Members"}),(0,r.jsx)("div",{className:"mt-5 h-[55vh] md:h-[65vh] ",children:(0,r.jsx)(i.Z,{className:"space-y-4",children:null==t?void 0:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.Z,{classes:"w-12 h-12",name:e.name}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:e.name}),(0,r.jsx)("p",{className:"text-blue-300 ",children:(null==n?void 0:n.find(t=>t.email==e.email))?"online":""})]})]},e._id))})}),(0,r.jsx)("button",{onClick:h,className:"ml-3 mt-8 bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-bold py-2 px-4 rounded-full shadow-lg transform transition-all duration-500 ease-in-out hover:scale-110 hover:brightness-110 hover:animate-pulse active:animate-bounce",children:"Leave Group"})]})}let w=e=>{let[t,n]=(0,a.useState)(!1),r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var l,a,o;let i=n=>{var l;if(!t)return;let a=c(n),o=null===(l=r.current)||void 0===l?void 0:l.getContext("2d");o&&a&&(e({ctx:o,currentPoint:a,prevPoint:s.current}),s.current=a)},c=e=>{let t=r.current;if(!t)return;console.log(e.type);let n=0,s=0,l=t.getBoundingClientRect(),a=t.width/l.width,o=t.height/l.height;return"touchmove"===e.type?(n=(e.touches[0].clientX-l.left)*a,s=(e.touches[0].clientY-l.top)*o):"mousemove"===e.type&&(n=(e.clientX-l.left)*a,s=(e.clientY-l.top)*o),{x:n,y:s}},d=()=>{console.log("pointerup"),n(!1),s.current=null};return null===(l=r.current)||void 0===l||l.addEventListener("touchmove",i),null===(a=r.current)||void 0===a||a.addEventListener("mousemove",i),window.addEventListener("mouseup",d),null===(o=r.current)||void 0===o||o.addEventListener("touchend",d),()=>{var e,t,n;null===(e=r.current)||void 0===e||e.removeEventListener("mousemove",i),window.removeEventListener("mouseup",d),null===(t=r.current)||void 0===t||t.removeEventListener("touchend",d),null===(n=r.current)||void 0===n||n.removeEventListener("touchmove",i)}},[e,t]),{canvasRef:r,onMouseDown:()=>n(!0),clear:()=>{let e=r.current;if(!e)return;let t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)}}};var R=n(39119);let V=e=>{let{prevPoint:t,currentPoint:n,ctx:r,color:s}=e,{x:l,y:a}=n,o=null!=t?t:n;r.beginPath(),r.lineWidth=3,r.strokeStyle=s,r.lineJoin="round",r.lineCap="round",r.moveTo(o.x,o.y),r.lineTo(l,a),r.stroke(),r.fillStyle=s,r.beginPath(),r.arc(o.x,o.y,1.5,0,2*Math.PI),r.fill()};var k=e=>{let{groupId:t}=e,{socket:n}=(0,a.useContext)(l.SocketContext),[s,o]=(0,a.useState)("#000"),{canvasRef:i,onMouseDown:c,clear:d}=w(function(e){let{prevPoint:r,currentPoint:l,ctx:a}=e;n.emit("draw-line",{groupId:t,prevPoint:r,currentPoint:l,color:s}),V({prevPoint:r,currentPoint:l,ctx:a,color:s})});return(0,a.useEffect)(()=>{var e;let r=null===(e=i.current)||void 0===e?void 0:e.getContext("2d");if(n)return console.log(n),n.emit("client-ready",{groupId:t}),n.on("get-canvas-state",()=>{var e;console.log("get-canvas-state"),(null===(e=i.current)||void 0===e?void 0:e.toDataURL())&&(console.log("sending canvas state"),n.emit("canvas-state",{state:i.current.toDataURL(),groupId:t}))}),n.on("canvas-state-from-server",e=>{console.log("I received the state");let t=new Image;t.src=e,t.onload=()=>{null==r||r.drawImage(t,0,0)}}),n.on("draw-line",e=>{let{prevPoint:t,currentPoint:n,color:s}=e;if(!r)return console.log("no ctx here");V({prevPoint:t,currentPoint:n,ctx:r,color:s})}),n.on("clear",d),()=>{n.off("draw-line"),n.off("get-canvas-state"),n.off("canvas-state-from-server"),n.off("clear")}},[i,n]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mt-2  flex flex-col justify-center items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsxs)(f.z,{type:"button",className:"m-2 py-1 px-3 rounded-md border border-black flex flex-col items-center",onClick:()=>n.emit("clear",{groupId:t}),children:[(0,r.jsx)("p",{className:"block",children:"Clear"}),(0,r.jsx)("p",{className:"block",children:"canvas"})]}),(0,r.jsx)(R.AI,{className:"m-2",color:s,onChange:e=>o(e.hex)})]}),(0,r.jsx)("p",{className:"text-left text-center text-gray-400 mt-5",children:"The Canvas State is synced to the members of the group in realtime."}),(0,r.jsx)("canvas",{ref:i,onMouseDown:c,onTouchStart:c,style:{maxWidth:"100%",width:"100%"},className:"bg-gray-300 border border-black rounded-md m-5 h-auto"})]})})},C=n(61396),B=n.n(C);v.Z.addLocale(b.Z);let S=new v.Z("en-US");function Q(e){let{docs:t,groupId:n}=e,{setLoading:l}=(0,a.useContext)(x.SpinnerContext),o=(0,a.useRef)(null),i=(0,N.useRouter)(),c=async function(){l(!0);let e=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/doc/create"),{groupId:n,name:o.current.value});l(),g.Am.success("Document Created."),i.push("/collab/".concat(e.data._id))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-10 mt-20",children:[(0,r.jsxs)("div",{className:"flex items-center text-center flex-col gap-2",children:[(0,r.jsx)("h2",{children:"Documents are automatically synced and saved in realtime."}),(0,r.jsx)("h2",{children:"Collab Cursor shows the changes being made by other users at the moment."})]}),(0,r.jsxs)("div",{className:"flex justify-center m-2 gap-5 flex-wrap",children:[null==t?void 0:t.map(e=>e?(0,r.jsx)("div",{onClick:()=>{g.Am.info("Please wait a few moments for the document to load")},className:"",children:(0,r.jsxs)(B(),{href:"/collab/"+e._id,children:[(0,r.jsxs)("div",{className:"relative inline-block px-4 py-2 font-medium group",children:[(0,r.jsx)("span",{className:"absolute inset-0 w-full h-full transition duration-200 ease-out transform translate-x-1 translate-y-1 bg-black group-hover:-translate-x-0 group-hover:-translate-y-0"}),(0,r.jsx)("span",{className:"absolute inset-0 w-full h-full bg-white border-2 border-black group-hover:bg-black"}),(0,r.jsxs)("span",{className:"relative text-black group-hover:text-white",children:[(0,r.jsx)("p",{className:"text-base",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Last Modified : ",S.format(Number(e.timestamp))]})," "]})]}),(0,r.jsx)("div",{className:"text-center"})]},e._id)},e._id):""),t&&0==t.length&&(0,r.jsx)("p",{className:"mt-20 text-center text-2xl",children:"No Documents Created Yet"})]}),(0,r.jsxs)("div",{className:"mx-auto mt-8 flex items-center justify-center gap-5",children:[(0,r.jsx)(m.I,{ref:o,placeholder:"name"}),(0,r.jsx)(f.z,{onClick:c,children:"Create"})]})]})})}let E=[{name:"chat",color:"orange"},{name:"docs",color:"green"},{name:"draw",color:"red"},{name:"drive",color:"yellow"}];function X(e){let{params:t}=e,{setLoading:n}=(0,a.useContext)(x.SpinnerContext),{data:o}=(0,c.useSession)(),{socket:i}=(0,a.useContext)(l.SocketContext),[d,m]=(0,a.useState)(null),[h,v]=(0,a.useState)(null),[b,A]=(0,a.useState)(null);async function N(){let e=await s.Z.get("".concat("https://workspace-api-f8rx.onrender.com","/group/single/").concat(t.groupId),{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.authToken)}});m(e.data)}(0,a.useEffect)(()=>{(null==o?void 0:o.authToken)&&N()},[null==o?void 0:o.authToken,t.groupId,o]);let w=e=>{let{usersOnline:t,callStatus:n}=e;v(t),A(n)};(0,a.useEffect)(()=>{d&&"none"!=d._id&&(null==i||i.emit("usersOnline",{groupId:t.groupId},w),null==i||i.on("usersOnline".concat(null==d?void 0:d._id),w),null==i||i.on("callStatus".concat(null==d?void 0:d._id),e=>{console.log("received callstatus",e),A(e)}))},[i,null==d?void 0:d._id,d,t.groupId]);let[R,V]=(0,a.useState)("chat"),C=async function(){n(!0);let{data:e}=await s.Z.post("".concat("https://workspace-api-f8rx.onrender.com","/users/join"),{groupId:t.groupId},{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.authToken)}});n(!1),N(),g.Am.success("Joined successfully")};return(0,r.jsxs)(r.Fragment,{children:[(null==d?void 0:d._id)=="none"&&(0,r.jsxs)("div",{className:"my-auto h-[80vh] flex flex-col items-center justify-center gap-5",children:[(0,r.jsx)("h1",{className:"text-4xl",children:"Not a member yet."}),(0,r.jsx)(f.z,{size:"lg",onClick:C,children:"Join"})]}),d&&"none"!=d._id&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex-1  justify-start",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,r.jsxs)("div",{className:"relative flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("img",{src:d.image,alt:"",className:"w-10 sm:w-16 h-10 sm:h-16 rounded-full object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,r.jsx)("div",{className:"text-2xl flex items-center",children:(0,r.jsx)("span",{className:"mr-3",children:null==d?void 0:d.name})}),(0,r.jsx)("span",{className:"text-xs w-1/3 h-1/3",children:"description"})]})]}),(0,r.jsxs)(r.Fragment,{children:[" ",E.map(e=>(0,r.jsx)("div",{className:"hidden md:flex",children:(0,r.jsxs)(f.z,{onClick:()=>V(e.name),className:function(e,t,n){let r=new String("bg-".concat(t==n?"".concat(e,"-500"):"gray-300"," text-gray-800 font-bold rounded border-b-2 border-").concat(e,"-500 hover:border-").concat(e,"-600  hover:bg-").concat(e,"-500 hover:text-white shadow-md inline-flex items-center"));return r}(e.color,R,e.name)+" py-2 px-6 ",children:[(0,r.jsx)("span",{className:"mr-2",children:e.name[0].toUpperCase()+e.name.slice(1)}),(0,r.jsx)(u(),{alt:"",width:"20",height:"20",src:"/".concat(e.name,".png")})]})},e.name+e.name+e.name))]}),b&&b.length?(0,r.jsx)(B(),{href:"/video/".concat(null==d?void 0:d._id),children:(0,r.jsx)("div",{className:"flex items-center mr-2",children:(0,r.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-3xl border transition bg-green-400 py-2 px-3  duration-500 ease-in-out text-gray-500 hover:bg-green-300 focus:outline-none",children:[(0,r.jsxs)("svg",{fill:"green-900",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 100 100",id:"video",children:[(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M84.9 26.4L68 37.3V34c0-4.4-3.6-8-8-8H20c-4.4 0-8 3.6-8 8v32c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-3.3l16.9 10.9c1.9 1 3.1-.7 3.1-1.7V28c0-1-1.1-2.8-3.1-1.6zM64 66c0 2.2-1.8 4-4 4H20c-2.2 0-4-1.8-4-4V34c0-2.2 1.8-4 4-4h40c2.2 0 4 1.8 4 4v32zm20 2.3L68 58V42l16-10.3v36.6z"})}),(0,r.jsx)("g",{children:(0,r.jsx)("path",{fill:"#00F",d:"M1224-650v1684H-560V-650h1784m8-8H-568v1700h1800V-658z"})})]}),(0,r.jsx)("p",{className:"ml-2 text-xl text-green-900",children:"JOIN"})]})})}):(0,r.jsx)(B(),{href:"/video/".concat(null==d?void 0:d._id),children:(0,r.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-xl border transition bg-gray-200   duration-500 ease-in-out text-gray-500 hover:bg-green-300 focus:outline-none",style:{width:"50px",height:"37px"},children:(0,r.jsxs)("svg",{fill:"green-900",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 100 100",id:"video",children:[(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M84.9 26.4L68 37.3V34c0-4.4-3.6-8-8-8H20c-4.4 0-8 3.6-8 8v32c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-3.3l16.9 10.9c1.9 1 3.1-.7 3.1-1.7V28c0-1-1.1-2.8-3.1-1.6zM64 66c0 2.2-1.8 4-4 4H20c-2.2 0-4-1.8-4-4V34c0-2.2 1.8-4 4-4h40c2.2 0 4 1.8 4 4v32zm20 2.3L68 58V42l16-10.3v36.6z"})}),(0,r.jsx)("g",{children:(0,r.jsx)("path",{fill:"#00F",d:"M1224-650v1684H-560V-650h1784m8-8H-568v1700h1800V-658z"})})]})})})]}),(0,r.jsx)("div",{className:"md:hidden flex justify-between justify-self-start space-x-2 p-2 border-b-2",children:E.map(e=>(0,r.jsxs)(f.z,{onClick:()=>V(e.name),className:"bg-".concat(R==e.name?"".concat(e.color,"-500"):"gray-300"," text-gray-800 font-bold rounded border-b-2 border-").concat(e.color,"-500 hover:border-").concat(e.color,"-600 hover:bg-").concat(e.color,"-500 hover:text-white shadow-md py-2 px-2 inline-flex items-center"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.name[0].toUpperCase()+e.name.slice(1)})," ",(0,r.jsx)(u(),{alt:"",width:"20",height:"20",src:"/".concat(e.name,".png")})]},e.name+"chota"))}),(0,r.jsx)("div",{style:{top:"7.4rem"},className:"hidden md:flex absolute left-70 w-screen border-b border-gray-300"}),"chat"==R&&(0,r.jsx)(p,{messages:null==d?void 0:d.history,groupId:null==d?void 0:d._id}),"drive"==R&&(0,r.jsx)(j,{groupId:null==d?void 0:d._id,files:null==d?void 0:d.files,getData:N}),"draw"==R&&(null==d?void 0:d._id)&&(0,r.jsx)(k,{groupId:null==d?void 0:d._id}),"docs"==R&&(0,r.jsx)(Q,{groupId:null==d?void 0:d._id,docs:null==d?void 0:d.docs})]}),(0,r.jsx)(y,{groupId:t.groupId,members:null==d?void 0:d.members,usersOnline:h})]})]})}},70306:function(e,t,n){"use strict";n.d(t,{cn:function(){return l}});var r=n(57042),s=n(23986);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m)((0,r.W)(t))}},3666:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(57437),s=n(2265),l=n(67256),a=n(96061),o=n(70306);let i=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:a,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(i({variant:s,size:a,className:n})),ref:t,...d})});c.displayName="Button"},78467:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(57437),s=n(2265),l=n(70306);let a=s.forwardRef((e,t)=>{let{className:n,type:s,...a}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});a.displayName="Input"},15136:function(){}},function(e){e.O(0,[996,649,222,685,691,388,262,971,361,744],function(){return e(e.s=13066)}),_N_E=e.O()}]);